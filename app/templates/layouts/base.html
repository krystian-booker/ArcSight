<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}ArcSight{% endblock %} Â· ArcSight</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/tokens.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/components.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/utilities.css') }}">
    <style>[x-cloak]{display:none!important}</style>
    <script type="module" defer src="{{ url_for('static', filename='js/alpine/bootstrap.js') }}"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.13.8/dist/cdn.min.js"></script>
</head>
<body class="app-body" x-data="layoutShell()" x-bind:class="{'has-sidebar-open': sidebarOpen && isHandheld}" @keydown.escape.window="closeSidebar()">
    <div class="app-shell">
        <aside
            id="primary-sidebar"
            class="app-sidebar"
            x-ref="sidebar"
            x-cloak
            :class="{'is-open': sidebarOpen && isHandheld}"
            tabindex="-1"
            role="navigation"
            :aria-hidden="isHandheld ? (!sidebarOpen).toString() : 'false'"
            aria-label="Primary navigation"
            @keydown.escape.stop="closeSidebar()"
        >
            <div class="sidebar-brand">
                <div class="brand-mark" aria-hidden="true">
                    <span class="brand-mark__pip"></span>
                    <span class="brand-mark__pip"></span>
                    <span class="brand-mark__pip"></span>
                </div>
                <div class="brand-copy">
                    <span class="brand-name">{{ config.BRAND_NAME }}</span>
                    <span class="brand-tagline">Robotics Vision Platform</span>
                </div>
            </div>
            <nav class="sidebar-nav" aria-label="Primary" @click="handleNavClick">
                <a href="{{ url_for('dashboard.dashboard_page') }}" class="nav-link {% if request.endpoint == 'dashboard.dashboard_page' %}is-active{% endif %}">
                    <span class="nav-link__icon">
                        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 13h6V4H4zm0 7h6v-6H4zm10 0h6v-9h-6zm0-16v4h6V4z"/></svg>
                    </span>
                    <span class="nav-link__label">Dashboard</span>
                </a>
                <a href="{{ url_for('cameras.cameras_page') }}" class="nav-link {% if request.endpoint == 'cameras.cameras_page' %}is-active{% endif %}">
                    <span class="nav-link__icon">
                        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M20 5h-3.17l-1.41-1.41A2 2 0 0 0 14.17 3H9.83a2 2 0 0 0-1.41.59L7 5H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2Zm-8 12a4 4 0 1 1 4-4 4 4 0 0 1-4 4Z"/></svg>
                    </span>
                    <span class="nav-link__label">Cameras</span>
                </a>
                <a href="{{ url_for('calibration.calibration_page') }}" class="nav-link {% if request.endpoint == 'calibration.calibration_page' %}is-active{% endif %}">
                    <span class="nav-link__icon">
                        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 4h16v2H4Zm0 14h16v2H4Zm2-10h12v8H6Z"/></svg>
                    </span>
                    <span class="nav-link__label">Calibration</span>
                </a>
                <a href="{{ url_for('settings.settings_page') }}" class="nav-link {% if request.endpoint == 'settings.settings_page' %}is-active{% endif %}">
                    <span class="nav-link__icon">
                        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 8a4 4 0 1 1-4 4 4 4 0 0 1 4-4m9.4 4a1 1 0 0 0-.52-.88l-1.7-.98a6.82 6.82 0 0 0-.24-.57l.26-1.94a1 1 0 0 0-1.14-1.14l-1.94.26a6.82 6.82 0 0 0-.57-.24l-.98-1.7A1 1 0 0 0 13 2.6a1 1 0 0 0-1 0l-.88.51-.98 1.7a6.82 6.82 0 0 0-.57.24L7.63 4.79a1 1 0 0 0-1.14 1.14l.26 1.94a6.82 6.82 0 0 0-.24.57l-1.7.98A1 1 0 0 0 4.6 12a1 1 0 0 0 .51.88l1.7.98a6.82 6.82 0 0 0 .24.57l-.26 1.94a1 1 0 0 0 1.14 1.14l1.94-.26a6.82 6.82 0 0 0 .57.24l.98 1.7a1 1 0 0 0 1.76 0l.98-1.7a6.82 6.82 0 0 0 .57-.24l1.94.26a1 1 0 0 0 1.14-1.14l-.26-1.94a6.82 6.82 0 0 0 .24-.57l1.7-.98a1 1 0 0 0 .51-.88Z"/></svg>
                    </span>
                    <span class="nav-link__label">Settings</span>
                </a>
            </nav>
            <div class="sidebar-footer">
                <p class="sidebar-footnote">Powered by High Voltage</p>
            </div>
        </aside>
        <div
            x-cloak
            x-show="sidebarOpen && isHandheld"
            x-transition.opacity
            class="app-backdrop"
            @click="closeSidebar()"
            aria-hidden="true"
        ></div>
        <div class="app-main" :aria-hidden="sidebarOpen && isHandheld ? 'true' : 'false'">
            <header class="app-topbar">
                <button
                    type="button"
                    class="button-icon topbar-toggle"
                    x-cloak
                    x-show="isHandheld"
                    x-ref="sidebarToggle"
                    :aria-expanded="(sidebarOpen && isHandheld).toString()"
                    aria-controls="primary-sidebar"
                    :aria-label="sidebarOpen ? 'Close navigation menu' : 'Open navigation menu'"
                    @click="toggleSidebar()"
                >
                    <span class="sr-only" x-text="sidebarOpen ? 'Close navigation menu' : 'Open navigation menu'"></span>
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                    </svg>
                </button>
                <div class="topbar-context">
                    <span class="topbar-context__label">ArcSight Control</span>
                    <span class="topbar-context__dot" aria-hidden="true"></span>
                    <span class="topbar-context__state">Connected to robot</span>
                </div>
            </header>
            <main class="app-content" data-endpoint="{{ request.endpoint }}">
                {% block content %}{% endblock %}
            </main>
        </div>
    </div>
</body>
</html>
