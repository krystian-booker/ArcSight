<div id="form-AprilTag" class="pipeline-form">
    <h3 class="text-lg font-bold mb-4">AprilTag Configuration</h3>
    <div class="flex flex-wrap md:flex-nowrap gap-4">
        <div class="w-full md:w-1/2">
            <form>
                <div class="mb-4">
                    <label for="target-family" class="block text-sm font-medium text-gray-300 mb-2" title="The family of AprilTags to detect.">Target Family</label>
                    <select id="target-family" class="custom-select">
                        <option value="36h11">36h11</option>
                        <option value="16h5">16h5</option>
                    </select>
                </div>
                <div class="mb-4">
                    <label for="tag-size" class="block text-sm font-medium text-gray-300 mb-2" title="The size of the AprilTag in inches.">Tag Size (inches)</label>
                    <input type="number" id="tag-size" step="0.1" class="custom-select w-full">
                </div>
                <div class="mb-4">
                    <label for="threads" class="block text-sm font-medium text-gray-300 mb-2" title="The number of threads to use for processing.">Threads (1-8)</label>
                    <div class="flex items-center gap-4">
                        <input type="range" id="threads" min="1" max="8" value="1" step="1" class="w-full">
                        <input type="number" id="threads-value" min="1" max="8" value="1" class="w-24 custom-select">
                    </div>
                </div>
                <div class="mb-4">
                    <label for="decimate" class="block text-sm font-medium text-gray-300 mb-2" title="Decimation of the image. Higher values increase performance but decrease accuracy.">Decimate (1-8)</label>
                    <div class="flex items-center gap-4">
                        <input type="range" id="decimate" min="1" max="8" value="1" step="1" class="w-full">
                        <input type="number" id="decimate-value" min="1" max="8" value="1" class="w-24 custom-select">
                    </div>
                </div>
                <div class="mb-4">
                    <label for="blur" class="block text-sm font-medium text-gray-300 mb-2" title="Amount of Gaussian blur to apply to the image. Helps with noisy images.">Blur (0-5)</label>
                    <div class="flex items-center gap-4">
                        <input type="range" id="blur" min="0" max="5" value="0" step="0.1" class="w-full">
                        <input type="number" id="blur-value" min="0" max="5" value="0" step="0.1" class="w-24 custom-select">
                    </div>
                </div>
                <div class="mb-4">
                    <label for="decision-margin" class="block text-sm font-medium text-gray-300 mb-2" title="How confident the detector must be to accept a detection.">Decision Margin Cutoff (0-250)</label>
                    <div class="flex items-center gap-4">
                        <input type="range" id="decision-margin" min="0" max="250" value="35" class="w-full">
                        <input type="number" id="decision-margin-value" min="0" max="250" value="35" class="w-24 custom-select">
                    </div>
                </div>
                <div class="mb-4">
                    <label for="pose-iterations" class="block text-sm font-medium text-gray-300 mb-2" title="Number of iterations to refine the pose estimation.">Pose Estimation Iterations (0-500)</label>
                    <div class="flex items-center gap-4">
                        <input type="range" id="pose-iterations" min="0" max="500" value="40" class="w-full">
                        <input type="number" id="pose-iterations-value" min="0" max="500" value="40" class="w-24 custom-select">
                    </div>
                </div>
                <div class="mb-4 flex items-center">
                    <input type="checkbox" id="refine-edges" class="form-checkbox h-5 w-5 text-indigo-600">
                    <label for="refine-edges" class="ml-2 block text-sm text-gray-300" title="Refine the edges of the detected tag for better pose estimation.">Refine Edges</label>
                </div>
                <div class="mb-4 flex items-center">
                    <input type="checkbox" id="multi-tag-enabled" class="form-checkbox h-5 w-5 text-indigo-600">
                    <label for="multi-tag-enabled" class="ml-2 block text-sm text-gray-300" title="Enable multi-tag pose estimation for 10-100x better accuracy. Requires field layout.">Enable Multi-Tag Estimation</label>
                </div>
                <div class="mb-4">
                    <label for="field-layout" class="block text-sm font-medium text-gray-300 mb-2" title="Upload FRC field layout JSON file with AprilTag positions.">Field Layout JSON</label>
                    <input type="file" id="field-layout" accept=".json" class="custom-select w-full">
                    <p class="text-xs text-gray-400 mt-1">Upload FRC field layout JSON (e.g., 2025-reefscape.json)</p>
                    <input type="hidden" id="field-layout-data" value="">
                </div>
            </form>
        </div>
        <div class="w-full md:w-1/2">
            <h4 class="text-md font-bold mb-2">Targets</h4>
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-700">
                    <thead class="bg-gray-700">
                        <tr>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">ID</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">X (m)</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Y (m)</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Z (m)</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Yaw (°)</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Pitch (°)</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Roll (°)</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Error</th>
                        </tr>
                    </thead>
                    <tbody id="apriltag-targets-tbody" class="bg-gray-800 divide-y divide-gray-700">
                        </tbody>
                </table>
            </div>
            <div id="multi-tag-section" class="mt-6" style="display: none;">
                <h4 class="text-md font-bold mb-2">Multi-Tag Pose</h4>
                <div class="bg-gray-800 p-4 rounded">
                    <div class="grid grid-cols-2 gap-2 text-sm">
                        <div><span class="text-gray-400">Tags Used:</span> <span id="multi-tag-count">-</span></div>
                        <div><span class="text-gray-400">Error:</span> <span id="multi-tag-error">-</span></div>
                        <div><span class="text-gray-400">X (m):</span> <span id="multi-tag-x">-</span></div>
                        <div><span class="text-gray-400">Y (m):</span> <span id="multi-tag-y">-</span></div>
                        <div><span class="text-gray-400">Z (m):</span> <span id="multi-tag-z">-</span></div>
                        <div><span class="text-gray-400">Yaw (°):</span> <span id="multi-tag-yaw">-</span></div>
                        <div><span class="text-gray-400">Pitch (°):</span> <span id="multi-tag-pitch">-</span></div>
                        <div><span class="text-gray-400">Roll (°):</span> <span id="multi-tag-roll">-</span></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>